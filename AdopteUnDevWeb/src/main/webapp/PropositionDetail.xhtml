<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="WEB-INF/lesimports.xhtml">
    <ui:define name="head">

    </ui:define>
    <ui:define name="title">Détail Proposition</ui:define>
    <ui:define name="body">
        <div class="section">
            <div class="container">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="product-image-large">
                            <img src="#{mBPropositionDetail.mBPropositionParUtilisateur.proposition.projet.photo}" alt="image projet"/>
                        </div>
                    </div>
                    <div class="col-lg-offset-1 col-sm-5 product-details">
                        <h4>#{mBPropositionDetail.mBPropositionParUtilisateur.proposition.projet.libelle}</h4>
                        <div class="price">
                            <span class="price-was">#{mBProjetDetail.cdc.tarif}€</span> #{mBProjetDetail.tarifRestant}€
                        </div>
                        <!--developpeur = 1-->
                        <h:panelGroup rendered="#{mBConnexion.typeUtilisateur==1}">
                            <div>
                                <h5>#{mBProjetDetail.mBProjetParUtilisateur.projet.client.nom} #{mBProjetDetail.mBProjetParUtilisateur.projet.client.prenom}</h5>
                                <p>#{mBProjetDetail.commentaireDeProjetParUtilisateur(1)}</p>
                            </div>
                            <br/>
                            <div>
                                <h5> date de livrable</h5>
                                <p>#{mBProjetDetail.cdc.dateFinEstimee}</p>
                            </div>
                            <div>
                                <h5>Type du projet</h5>
                                <p>#{mBProjetDetail.mBProjetParUtilisateur.projet.service.libelle}</p>
                            </div>
                        </h:panelGroup>
                        <!--client = 2-->
                        <h:panelGroup rendered="#{mBConnexion.typeUtilisateur==2}">
                            <div>
                                <h5>Votre developpeur</h5>
                                <p>#{mBProjetDetail.cdc.developpeur.nom} #{mBProjetDetail.cdc.developpeur.prenom}</p>
                                <p>#{mBProjetDetail.commentaireDeProjetParUtilisateur(17)}</p>
                            </div>
                            <div>
                                <h5> date de livrable</h5>
                                <p>#{mBProjetDetail.cdc.dateFinEstimee.toString().subSequence(0, 10)}</p>
                            </div>
                            <div>
                                <h5>Type du projet</h5>
                                <p>#{mBProjetDetail.mBProjetParUtilisateur.projet.service.libelle}</p>
                            </div>
                        </h:panelGroup>
                    </div>
                    <div class="col-sm-12 product-details">
                        <h:panelGroup rendered="#{mBConnexion.typeUtilisateur==2}">
                            <h5>Vos livrables :</h5>
                            <div class="col-sm-8 table-responsive">
                                <table class="table">
                                    <thead>
                                    <tr>
                                        <td>Date de livraison</td>
                                        <td>Echeance</td>
                                        <td>description</td>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <ui:repeat value="#{mBProjetDetail.livrableList}" var="livrable">
                                        <tr>
                                            <td>#{livrable.dateLivraison.toString().subSequence(0, 10)}</td>
                                            <td>#{livrable.echeance.toString().subSequence(0, 10)}</td>
                                            <td>#{livrable.description}</td>
                                        </tr>
                                    </ui:repeat>
                                    </tbody>
                                </table>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup rendered="#{mBConnexion.typeUtilisateur==1}">
                            <h5>Vos livrables :</h5>
                            <p:growl id="messages" showDetail="true"/>

                            <p:fileUpload value="#{mBProjetDetail.file}" mode="simple" skinSimple="true"/>

                            <p:commandButton value="Submit" ajax="false" actionListener="#{mBProjetDetail.upload}"
                                             disabled="true"/>
                        </h:panelGroup>
                    </div>
                    <div class="col-sm-12">
                        <div class="tabbable">
                            <!-- Tabs -->
                            <ul class="nav nav-tabs product-details-nav">
                                <li class="active"><a href="#tab1" data-toggle="tab">#{mBProjetDetail.cdc.typeCdc.libelle}</a></li>
                            </ul>
                            <div class="tab-content product-detail-info">
                                <div class="tab-pane active" id="tab1">
                                    <h4>L'existant</h4>
                                    <p>#{mBProjetDetail.cdc.existant}</p>
                                    <h4>Les contexte</h4>
                                    <p>#{mBProjetDetail.cdc.contexte}</p>
                                    <h4>Les besoins</h4>
                                    <p>#{mBProjetDetail.cdc.besoin}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Full Description & Specification -->
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>
</html>